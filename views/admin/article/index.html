{{include 'admin/public/header.html'}}
    <body>
        {{include 'admin/public/nav-top.html'}}

        <div class="main-container" id="main-container">
            <script type="text/javascript">
                try{ace.settings.check('main-container' , 'fixed')}catch(e){}
            </script>

            <div class="main-container-inner">
                <a class="menu-toggler" id="menu-toggler" href="#">
                    <span class="menu-text"></span>
                </a>

                <!-- 左边侧栏 -->
                {{include 'admin/public/left-siderbar.html'}}

                <div class="main-content">
                    <!-- 面包屑 -->
                    {{include 'admin/public/bread-crumbs.html'}}

                    <div class="page-content">

                        <div class="page-header">
                            <h1>
                                内容列表                              
                            </h1>
                        </div><!-- /.page-header -->



                        <!--表格-->

                        <div class="table-responsive">
                            <table id="sample-table-1" class="table table-striped table-bordered table-hover center">
                                <thead>
                                    <tr>
                                        <th class="center">标题</th>
                                        <th class="center">分类</th>
                                        <th class="center">
                                            <i class="icon-time bigger-110 hidden-480"></i>
                                            发布时间
                                        </th>
                                        <th width="60px" class="center">排序</th>
                                        <th width="60px" class="center">热门</th>
                                        <th width="60px" class="center">推荐</th>
                                        <th width="60px" class="center">状态</th>
                                        <th width="100px" class="center">操作</th>
                                    </tr>
                                </thead>

                                <tbody>
                                    {{each list}}
                                        <tr class="">
                                            <td>
                                                {{$value.title}}
                                            </td>
                                            <td>
                                                {{$value.catename}}
                                            </td>

                                            <td>
                                                <!-- 判断显示时间 -->
                                                {{if $value.add_time}}

                                                    {{$value.add_time | dateFormat}}
                                                    
                                                {{/if}}
                                            </td>
                                            <td>
                                                <input type="text" value="{{$value.sort || 0}}" class="sort_input" onblur="app.changeSort(this,'t_article','{{@$value._id}}')" style="width: 40px; text-align: center;" />
                                            </td>

                                            <td>
                                                {{if $value.is_host==1}}
                                                <img src="{{__HOST__}}/admin/assets/images/yes.gif" onclick="app.toggle(this,'t_article','is_host','{{@$value._id}}')" />
                                                {{else}}
                                                <img src="{{__HOST__}}/admin/assets/images/no.gif" onclick="app.toggle(this,'t_article','is_host','{{@$value._id}}')" />
                                                {{/if}}
                                            </td>

                                            <td>
                                                {{if $value.is_best==1}}
                                                <img src="{{__HOST__}}/admin/assets/images/yes.gif" onclick="app.toggle(this,'t_article','is_best','{{@$value._id}}')" />
                                                {{else}}
                                                <img src="{{__HOST__}}/admin/assets/images/no.gif" onclick="app.toggle(this,'t_article','is_best','{{@$value._id}}')" />
                                                {{/if}}
                                            </td>

                                            <td>
                                                {{if $value.status==1}}
                                                <img src="{{__HOST__}}/admin/assets/images/yes.gif" onclick="app.toggle(this,'t_article','status','{{@$value._id}}')" />
                                                {{else}}
                                                <img src="{{__HOST__}}/admin/assets/images/no.gif" onclick="app.toggle(this,'t_article','status','{{@$value._id}}')" />
                                                {{/if}}
                                            </td>
                                            <td>
                                                <a href="{{__HOST__}}/admin/article/edit?id={{@$value._id}}">
                                                    <button class="btn btn-xs btn-info">
                                                        <i class="icon-edit bigger-120"></i>
                                                    </button>
                                                </a>
                                                &nbsp;&nbsp;
                                                <a class="delete" href="{{__HOST__}}/admin/remove?collection=t_article&id={{@$value._id}}">
                                                    <button class="btn btn-xs btn-danger">
                                                        <i class="icon-trash bigger-120"></i>
                                                    </button>
                                                </a>

                                            </td>
                                        </tr>
                                        {{/each}}
                                </tbody>
                            </table>
                            <div id="page" class="pagination"></div>
                        </div>

                    </div>
                </div><!-- /.main-content -->
            
            </div><!-- /.main-container-inner -->

            <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
                <i class="icon-double-angle-up icon-only bigger-110"></i>
            </a>
        </div><!-- /.main-container -->


        {{include 'admin/public/footer.html'}}
<!-- 分页插件 -->
        <script src="{{__HOST__}}/admin/assets/jqPaginator.js"></script>
        <script>
            $('#page').jqPaginator({
                totalPages: {{totalPage}},
                visiblePages: 5,
                currentPage: {{page}},
                onPageChange: function(num,type){
                    if(type == "change"){
                        location.href = "{{__HOST__}}/admin/article?page=" + num;
                    }
                }
            })
        </script>

        <script type="text/javascript">
            jQuery(function($) {
                                
                $('table th input:checkbox').on('click' , function(){
                    var that = this;
                    $(this).closest('table').find('tr > td:first-child input:checkbox')
                    .each(function(){
                        this.checked = that.checked;
                        $(this).closest('tr').toggleClass('selected');
                    });
                        
                });
            
            
                $('[data-rel="tooltip"]').tooltip({placement: tooltip_placement});
                function tooltip_placement(context, source) {
                    var $source = $(source);
                    var $parent = $source.closest('table')
                    var off1 = $parent.offset();
                    var w1 = $parent.width();
            
                    var off2 = $source.offset();
                    var w2 = $source.width();
            
                    if( parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2) ) return 'right';
                    return 'left';
                }
            })
        </script>
    
</body>
</html>

